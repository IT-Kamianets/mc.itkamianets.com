<div class="min-h-screen bg-[var(--c-bg-primary)] animate-fade-in">
	<div class="max-w-7xl mx-auto px-[var(--sp-4)] sm:px-[var(--sp-6)] lg:px-[var(--sp-8)] py-[var(--sp-12)]">
		
		<!-- Header Section -->
		<div class="mb-12 text-center">
			<h1 class="text-4xl font-bold tracking-tight sm:text-5xl mb-6" style="color: var(--c-text-primary);">Галерея</h1>
			<p class="text-lg opacity-70 leading-relaxed max-w-2xl mx-auto" style="color: var(--c-text-secondary);">
				Яскраві моменти з наших заходів, воркшопів та повсякденних буднів молодіжного центру.
			</p>
		</div>

		<!-- Category Filter -->
		<div class="flex flex-wrap justify-center gap-3 mb-12">
			<button
				(click)="selectedCategory.set(null)"
				class="px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300 border-2 shadow-sm hover:shadow-md hover:-translate-y-0.5 active:scale-95"
				[style.background-color]="!selectedCategory() ? 'var(--c-primary)' : 'var(--c-bg-secondary)'"
				[style.color]="!selectedCategory() ? 'white' : 'var(--c-text-primary)'"
				[style.border-color]="!selectedCategory() ? 'var(--c-primary)' : 'var(--c-border)'"
			>
				Усі фото
			</button>

			@for (category of getCategories(); track category) {
				<button
					(click)="selectedCategory.set(category)"
					class="px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300 border-2 shadow-sm hover:shadow-md hover:-translate-y-0.5 active:scale-95"
					[style.background-color]="selectedCategory() === category ? 'var(--c-primary)' : 'var(--c-bg-secondary)'"
					[style.color]="selectedCategory() === category ? 'white' : 'var(--c-text-primary)'"
					[style.border-color]="selectedCategory() === category ? 'var(--c-primary)' : 'var(--c-border)'"
				>
					{{ category }}
				</button>
			}
		</div>

		<!-- Gallery Grid -->
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
			@for (item of getFilteredItems(); track item.id; let i = $index) {
				<div
					(click)="selectItem(item)"
					class="group relative aspect-[4/3] rounded-[var(--radius-card)] overflow-hidden bg-[var(--c-bg-secondary)] border border-[var(--c-border)] shadow-lg hover:shadow-2xl transition-all duration-500 cursor-pointer hover:-translate-y-1"
				>
					<img
						[src]="item.imageUrl"
						[alt]="item.title"
						loading="lazy"
						class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
						onerror="this.src='https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=800&q=80'"
					/>

					<!-- Overlay -->
					<div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex flex-col justify-end p-6">
						<span class="inline-block w-fit text-[10px] font-black px-3 py-1 rounded-full bg-[var(--c-primary)] text-white mb-2 uppercase tracking-widest">
							{{ item.category }}
						</span>
						<h3 class="text-xl font-bold text-white mb-1 leading-tight">{{ item.title }}</h3>
						<p class="text-white/70 text-xs line-clamp-2 font-medium">{{ item.description }}</p>
					</div>
				</div>
			}
		</div>

		<!-- Results Count -->
		<div class="text-center mt-16">
			<div class="inline-flex items-center gap-3 px-6 py-3 rounded-full bg-[var(--c-bg-secondary)] border border-[var(--c-border)] shadow-md">
				<span class="w-2 h-2 rounded-full bg-[var(--c-primary)]"></span>
				<p class="text-sm font-bold" style="color: var(--c-text-secondary);">
					Показано {{ getFilteredItems().length }} фото
				</p>
			</div>
		</div>
	</div>

	<!-- Modal -->
	@if (selectedItem(); as item) {
		<div
			class="fixed inset-0 flex items-center justify-center p-4 z-50"
			(click)="closeModal()"
		>
			<div class="absolute inset-0 bg-black/90 backdrop-blur-md"></div>

			<div class="relative max-w-5xl w-full" (click)="$event.stopPropagation()">
				<button
					(click)="closeModal()"
					class="absolute -top-16 right-0 w-12 h-12 flex items-center justify-center rounded-full bg-white/10 text-white hover:bg-[var(--c-primary)] hover:scale-110 transition-all duration-300 z-10"
				>
					✕
				</button>

				<div class="bg-[var(--c-bg-secondary)] rounded-[var(--radius-card)] overflow-hidden shadow-2xl border border-white/10">
					<div class="relative group">
						<img [src]="item.imageUrl" [alt]="item.title" class="w-full h-auto max-h-[70vh] object-contain mx-auto" />

						<button (click)="prevItem(); $event.stopPropagation()" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 hover:bg-[var(--c-primary)] text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100">←</button>
						<button (click)="nextItem(); $event.stopPropagation()" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/20 hover:bg-[var(--c-primary)] text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100">→</button>
					</div>

					<div class="p-8 sm:p-10 border-t border-[var(--c-border)]">
						<span class="inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest bg-[var(--c-primary)] text-white mb-4">
							{{ item.category }}
						</span>
						<h2 class="text-3xl font-bold mb-4" style="color: var(--c-text-primary);">{{ item.title }}</h2>
						<p class="text-lg opacity-70 leading-relaxed" style="color: var(--c-text-secondary);">{{ item.description }}</p>
						
						<div class="mt-8 flex flex-wrap gap-2">
							@for (tag of item.tags; track tag) {
								<span class="px-4 py-1.5 rounded-full bg-[var(--c-bg-tertiary)] text-[var(--c-text-primary)] text-sm font-bold border border-[var(--c-border)]">#{{ tag }}</span>
							}
						</div>
					</div>
				</div>
			</div>
		</div>
	}
</div>
