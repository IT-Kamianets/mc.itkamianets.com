<section class="py-[var(--sp-16)] sm:py-[var(--sp-20)] bg-[var(--c-bg-tertiary)] relative overflow-hidden">
	<!-- Decorative background blob -->
	<div class="absolute top-1/2 left-0 -translate-y-1/2 w-[400px] h-[400px] bg-[var(--c-primary)] opacity-[0.02] rounded-full blur-[100px] pointer-events-none"></div>

	<div class="max-w-7xl mx-auto px-[var(--sp-4)] sm:px-[var(--sp-6)] lg:px-[var(--sp-8)] relative z-10">
		<!-- Header -->
		<div class="text-center mb-[var(--sp-12)] animate-fade-in">
			<h2 class="text-3xl font-black text-[var(--c-text-primary)] sm:text-4xl lg:text-5xl mb-4">–ù–∞—à–µ –∂–∏—Ç—Ç—è —É —Ñ–æ—Ç–æ</h2>
			<div class="w-16 h-1 bg-[var(--c-accent)] mx-auto rounded-full mb-6"></div>
			<p class="text-base text-[var(--c-text-secondary)] opacity-70 max-w-xl mx-auto font-medium">
				–Ø—Å–∫—Ä–∞–≤—ñ –º–æ–º–µ–Ω—Ç–∏ –∑ –Ω–∞—à–∏—Ö –∑–∞—Ö–æ–¥—ñ–≤, –≤–æ—Ä–∫—à–æ–ø—ñ–≤ —Ç–∞ –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω–∏—Ö –±—É–¥–Ω—ñ–≤ –º–æ–ª–æ–¥—ñ–∂–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä—É.
			</p>
		</div>

		<!-- Grid -->
		<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
			@for (item of items(); track item.id; let i = $index) {
				<div 
					(click)="selectItem(item)"
					class="group relative aspect-square rounded-[var(--radius-card)] overflow-hidden cursor-pointer shadow-[var(--shadow-md)] hover:shadow-[var(--shadow-lg)] transition-all duration-700 animate-slide-up bg-[var(--c-bg-tertiary)]"
					[style.animationDelay]="(i * 0.1) + 's'"
				>
					<!-- Placeholder for failing images -->
					<div class="absolute inset-0 flex items-center justify-center text-4xl opacity-20">üñºÔ∏è</div>

					<img 
						[src]="item.images[0]" 
						[alt]="item.title"
						class="relative z-10 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 group-hover:rotate-1"
						onerror="this.style.display='none'"
					>
					
					<!-- Elegant Overlay - Always visible labels for better UX when images fail -->
					<div class="absolute inset-0 z-20 bg-gradient-to-t from-[var(--c-text-primary)]/90 via-[var(--c-text-primary)]/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 flex flex-col justify-end p-6">
						<span class="inline-block w-fit px-3 py-1 rounded-full bg-[var(--g-primary)] text-white text-[9px] font-black uppercase tracking-widest mb-3 translate-y-3 group-hover:translate-y-0 transition-transform duration-500">
							{{ item.category }}
						</span>
						<h3 class="text-white text-xl font-black mb-1.5 translate-y-3 group-hover:translate-y-0 transition-transform duration-500 delay-75">{{ item.title }}</h3>
						<p class="text-white/70 text-xs line-clamp-2 font-medium translate-y-3 group-hover:translate-y-0 transition-transform duration-500 delay-150">{{ item.description }}</p>
					</div>

					<!-- Hover Border Inner -->
					<div class="absolute inset-3 z-30 border border-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-700 pointer-events-none rounded-[var(--radius)]"></div>
				</div>
			}
		</div>

		<!-- Button -->
		<div class="mt-[var(--sp-12)] text-center animate-fade-in" style="animation-delay: 0.5s;">
			<a 
				routerLink="/gallery"
				class="inline-flex items-center gap-2.5 px-[var(--sp-10)] py-3.5 bg-white border border-[var(--c-border)] rounded-[var(--radius-btn)] text-[var(--c-text-primary)] font-black text-sm transition-all hover:border-[var(--c-primary)] hover:bg-white hover:-translate-y-1 active:scale-95 shadow-md group"
			>
				–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—é –≥–∞–ª–µ—Ä–µ—é
				<span class="text-[var(--c-primary)] group-hover:translate-x-1 transition-transform">‚Üí</span>
			</a>
		</div>
	</div>

	<!-- Modal Viewer -->
	@if (selectedItem(); as item) {
		<div
			class="fixed inset-0 flex items-center justify-center p-4 sm:p-6 z-[99999] animate-fade-in"
			(click)="closeModal()"
		>
			<div class="absolute inset-0 bg-black/95 backdrop-blur-2xl"></div>

			<div class="relative max-w-6xl w-full h-full flex items-center justify-center py-6 sm:py-12" (click)="$event.stopPropagation()">
				<button
					(click)="closeModal()"
					class="absolute -top-2 -right-2 sm:top-4 sm:right-4 w-10 h-10 flex items-center justify-center rounded-full bg-black/50 text-white hover:bg-[var(--c-secondary)] hover:scale-110 transition-all duration-300 z-[100001]"
				>
					‚úï
				</button>

				<div class="bg-white rounded-[var(--radius-card)] overflow-hidden shadow-2xl flex flex-col lg:flex-row w-full max-h-[80vh]">
					<!-- Main Image Container -->
					<div class="relative flex-1 bg-black flex items-center justify-center overflow-hidden group min-h-[300px] lg:min-h-0">
						@if (item.images && item.images.length > 0) {
							<img [src]="item.images[currentImageIndex()]" [alt]="item.title" class="max-w-full max-h-full object-contain animate-fade-in" />
						}

						@if (item.images && item.images.length > 1) {
							<button (click)="prevImage($event)" class="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 hover:bg-[var(--c-primary)] text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100 flex items-center justify-center font-bold">‚Üê</button>
							<button (click)="nextImage($event)" class="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 hover:bg-[var(--c-primary)] text-white backdrop-blur-md transition-all opacity-0 group-hover:opacity-100 flex items-center justify-center font-bold">‚Üí</button>
						}
					</div>

					<!-- Sidebar Info -->
					<div class="w-full lg:w-80 flex flex-col border-l border-[var(--c-border)] bg-white overflow-hidden h-full">
						<div class="p-6 sm:p-8 flex-1 overflow-y-auto">
							<span class="inline-block px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest bg-[var(--c-primary)] text-white mb-4">
								{{ item.category }}
							</span>
							<h2 class="text-xl sm:text-2xl font-black mb-4 leading-tight" style="color: var(--c-text-primary);">{{ item.title }}</h2>
							<p class="text-sm opacity-70 leading-relaxed mb-6" style="color: var(--c-text-secondary);">{{ item.description }}</p>
							
							<!-- Thumbnails -->
							@if (item.images && item.images.length > 1) {
								<div class="mb-6">
									<p class="text-[9px] font-black uppercase tracking-widest text-[var(--c-text-muted)] mb-3">–í—Å—ñ —Ñ–æ—Ç–æ ({{ item.images.length }})</p>
									<div class="grid grid-cols-4 gap-2">
										@for (img of item.images; track $index; let i = $index) {
											<div 
												(click)="setCurrentImage(i)"
												class="aspect-square rounded-lg overflow-hidden cursor-pointer border-2 transition-all shadow-sm"
												[style.borderColor]="currentImageIndex() === i ? 'var(--c-primary)' : 'transparent'"
											>
												<img [src]="img" class="w-full h-full object-cover" [style.opacity]="currentImageIndex() === i ? '1' : '0.4'">
											</div>
										}
									</div>
								</div>
							}
						</div>
					</div>
				</div>
			</div>
		</div>
	}
</section>
